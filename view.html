<!DOCTYPE html>
<html>
<head lang="zh-cn">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
	<title>砍价详情</title>
	<meta name="renderer" content="webkit">
	<!-- No Baidu Siteapp-->
	<!-- <meta http-equiv="Cache-Control" content="no-siteapp"/> -->
	<!-- <link rel="alternate icon" type="image/png" href="i/favicon.png"> -->
	<!-- <link rel="apple-touch-icon-precomposed" href="i/app-icon72x72@2x.png"> -->
	<!-- <meta name="apple-mobile-web-app-title" content="AMUI React"/> -->
	<!-- <meta name="apple-mobile-web-app-capable" content="yes"> -->
	<!-- <meta name="apple-mobile-web-app-status-bar-style" content="black"> -->
	<link rel="stylesheet" href="http://cdn.amazeui.org/amazeui/2.4.0/css/amazeui.min.css">
	<link rel="stylesheet" href="src/css/bargain_view.css">
	<script src="http://cdn.amazeui.org/react/0.13.3/react.js"></script>
	<script src="http://cdn.bootcss.com/react/0.13.3/JSXTransformer.js"></script>
	<script src="http://cdn.amazeui.org/amazeui-react/1.0.0-beta1/amazeui.react.min.js"></script>
	<!-- <script src="http://cdn.bootcss.com/react-router/0.13.3/ReactRouter.min.js"></script> -->
	<script src="http://res01.xesimg.com/jquery/2.1.1/jquery.min.js"></script>
	<!-- // <script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script> -->
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/react-router/0.13.3/ReactRouter.min.js"></script> -->
	<!-- showdown : 处理 Markdown 文本并且转换为原始的 HTML。 -->
	<!-- <script src="http://cdnjs.cloudflare.com/ajax/libs/showdown/0.3.1/showdown.min.js"></script> -->
</head>
<body>
	<div id="content">Loading...</div>
	<script>
	var bargain = {
		courseUrl : "data/view/6563.json", // 砍价详情，两个参数 /Welfares/getInfo/6564/10114
		courseId : "6563", // 课程ID
		myself : "Marco",
		title : "我在学而思网校参加了一个精品课程砍价活动，已成功砍掉了45元！，快来帮帮我吧！",
		desc : "课程标题 \n 适用于 初三年级",
		img : "",
		link : ""
	};


	wx.config({
	    debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来
	    appId: '', // 必填，公众号的唯一标识
	    timestamp: , // 必填，生成签名的时间戳
	    nonceStr: '', // 必填，生成签名的随机串
	    signature: '',// 必填，签名，见附录1
	    jsApiList: [ 'onMenuShareTimeline', 'onMenuShareAppMessage' ] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
	});

	// config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。
	wx.ready(function(){
		// 分享到朋友圈
		wx.onMenuShareTimeline({
		    title: bargain.title, // 分享标题
		    link: bargain.link, // 分享链接
		    imgUrl: bargain.img, // 分享图标
		    success: function () { 
        		window.location.reload();
		    },
	        // 用户取消分享后执行的回调函数
		    cancel: function () {}
		});

		// 发送给好友
		wx.onMenuShareAppMessage({
		    title: bargain.title, // 分享标题
		    desc: bargain.desc, // 分享描述
		    link: bargain.link, // 分享链接
		    imgUrl: bargain.img, // 分享图标
		    type: '', // 分享类型,music、video或link，不填默认为link
		    dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
	        // 用户确认分享后执行的回调函数
		    success: function () { 
        		window.location.reload();
		    },
	        // 用户取消分享后执行的回调函数
		    cancel: function () {}
		});
	    
	});
	// config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。
	wx.error(function(res){ /*...*/ });

	
	// WeixinJSBridge.on('menu:share:timeline', function(argv) {
 //        WeixinJSBridge.invoke('shareTimeline', {
 //            "appid": '',
 //            "img_url": '',
 //            "img_width": "640",
 //            "img_height": "640",
 //            "link": '',
 //            "desc": '课程标题+适用于 初三年级',
 //            "title": '我在学而思网校参加了一个精品课程砍价活动，已成功砍掉了45元！，快来帮帮我吧！'
 //        }, onShareComplete);
 //    });
	</script>

    <script src="src/js/bargain_view.js" type="text/jsx"></script>
</body>
</html>